"use strict";var applog=function(){var r,a,f,s,c="applog_uuid",u=0,l="https://api.yondor.cn",g=0,d=!1,i=!0,p="",h=null,w=1,o=console.log,t=console.debug,v=console.warn,W=console.error;function n(n){return n.json()}function e(n){if(200<=n.status&&n.status<300)return n;var o=new Error(n.statusText);throw o.response=n,o}function m(){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return n()+n()+n()+n()+n()+ +n()+n()+n()}function x(n){for(var o=1;o<n.length;o++)1<o&&0,n[o]}return{init:function(n,o,e){try{var t;u=n,g=0,r=o,a=function(){var n,o=navigator.userAgent.toLowerCase(),e=["ipad","iphone os","midp","rv:1.2.3.4","ucweb","android","windows ce","windows mobile","ios","safari","mqqbrowser","chrome","mac","win"];for(n in e)if(-1<o.indexOf(e[n]))return e[n];return"unknow"}(),f=function(){var n=navigator.userAgent,o="Win32"==navigator.platform||"Windows"==navigator.platform,e="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(e)return"Mac";if("X11"==navigator.platform&&!o&&!e)return"Unix";if(-1<String(navigator.platform).indexOf("Linux"))return"Linux";if(o){if(-1<n.indexOf("Windows NT 5.0")||-1<n.indexOf("Windows 2000"))return"Win2000";if(-1<n.indexOf("Windows NT 5.1")||-1<n.indexOf("Windows XP"))return"WinXP";if(-1<n.indexOf("Windows NT 5.2")||-1<n.indexOf("Windows 2003"))return"Win2003";if(-1<n.indexOf("Windows NT 6.0")||-1<n.indexOf("Windows Vista"))return"WinVista";if(-1<n.indexOf("Windows NT 6.1")||-1<n.indexOf("Windows 7"))return"Win7";if(-1<n.indexOf("Windows NT 10")||-1<n.indexOf("Windows 10"))return"Win10"}return"other"}(),"undefined"!=typeof localStorage?(t=localStorage.getItem(c))&&""!==t?p=t:(p=m(),localStorage.setItem(c,p)):p=m(),s=e,"undefined"==typeof Worker||"undefined"==typeof fetch||"undefined"==typeof JSON?(d=!1,W("@init your browser do not support fetcth/Worker api!")):d=!0,null===h&&(i={type:"init",appid:u,version:r,uid:1,device:a,platform:f,key:p,url:l},(h=new Worker(s)).onerror=function(n){console.log("@onerror",n)},h.onmessage=function(n){"init"==n.data&&h.postMessage(i)}),this.fetchConfig()}catch(n){W(n)}var i},setUserID:function(n){try{g="string"==typeof n?parseInt(n):n,null!=h&&h.postMessage({type:"uid",userID:g})}catch(n){W(n)}},setServerURL:function(n){l=n},setRedirect:function(n){try{var e=this;d&&n?(console.debug=function(){1==arguments.length?e.fine("debug",""+arguments[0]):2<=arguments.length&&e.fine(""+arguments[0],x(arguments))},console.log=function(n,o){1==arguments.length?e.fine("info",""+n):2<=arguments.length&&e.fine(""+n,x(arguments))},console.warn=function(n,o){1==arguments.length?e.fine("warn",""+n):2<=arguments.length&&e.fine(""+n,x(arguments))},console.error=function(n,o){1==arguments.length?e.fine("error",""+n):2<=arguments.length&&e.fine(""+n,x(arguments))}):n||(console.debug=t,console.log=o,console.warn=v,console.error=W)}catch(n){W(n)}},fetchConfig:function(){d&&fetch(l+"/logcat/config/"+u+"/"+g).then(e).then(n).then(function(n){o("applog config:",n),200<=n.code&&n.code<300&&(i=n.enable,w=n.level)}).catch(function(n){console.error(n)})},fine:function(n,o){this._log(0,n,o)},info:function(n,o){this._log(1,n,o)},log:function(n,o){this._log(1,n,o)},warn:function(n,o){this._log(2,n,o)},error:function(n,o){this._log(3,n,o)},_log:function(n,o,e){try{if(n<w)return;var t=""+e;if(100<(""+o).length&&t.substring(0,100),200<t.length&&(t=t.substring(0,200)),!i||!d){switch(n){case 0:console.debug(o,e);break;case 1:console.info(o,e);break;case 2:console.warn(o,e);break;case 3:console.error(o,e);break;default:console.info(o,e)}return}t=(new Date).getTime();h.postMessage({type:"message",data:{t:t,l:n,g:o,c:e}})}catch(n){W(n)}}}}(window);window.applog=applog;