"use strict";var applog=function(){var s,f,c,l="applog_uuid",u=0,g="https://api.yondor.cn",d=0,p=!1,i=!0,w="",h="",W=null,r=1,o=console.log,t=console.debug,a=console.warn,v=console.error;function n(n){return n.json()}function e(n){if(200<=n.status&&n.status<300)return n;var o=new Error(n.statusText);throw o.response=n,o}function m(){function n(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return n()+n()+n()+n()+n()+ +n()+n()+n()}function x(n){for(var o=1;o<n.length;o++)1<o&&0,n[o]}return{init:function(n,o,e){try{u=n,d=0,s=o,f=function(){var n,o=navigator.userAgent.toLowerCase(),e=["ipad","iphone os","midp","rv:1.2.3.4","ucweb","android","windows ce","windows mobile","ios","classin","mqqbrowser","chrome","mac","win","safari"];for(n in e)if(-1<o.indexOf(e[n]))return e[n];return"unknow"}(),i=navigator.userAgent,r="Win32"==navigator.platform||"Windows"==navigator.platform,a="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform,h=a?"Mac":"X11"!=navigator.platform||r||a?-1<String(navigator.platform).indexOf("Linux")?"Linux":r?-1<i.indexOf("Windows NT 5.0")||-1<i.indexOf("Windows 2000")?"Win2000":-1<i.indexOf("Windows NT 5.1")||-1<i.indexOf("Windows XP")?"WinXP":-1<i.indexOf("Windows NT 5.2")||-1<i.indexOf("Windows 2003")?"Win2003":-1<i.indexOf("Windows NT 6.0")||-1<i.indexOf("Windows Vista")?"WinVista":-1<i.indexOf("Windows NT 6.1")||-1<i.indexOf("Windows 7")?"Win7":-1<i.indexOf("Windows NT 6.2")||-1<i.indexOf("Windows NT 10")||-1<i.indexOf("Windows 10")?"Win10":"Win":"other":"Unix","undefined"!=typeof localStorage?(i=localStorage.getItem(l))&&""!==i?w=i:(w=m(),localStorage.setItem(l,w)):w=m(),c=e,"undefined"==typeof Worker||"undefined"==typeof fetch||"undefined"==typeof JSON?(p=!1,v("@init your browser do not support fetcth/Worker api!")):p=!0,null===W&&(t={type:"init",appid:u,version:s,uid:1,device:f,platform:h,key:w,url:g},(W=new Worker(c)).onerror=function(n){console.log("@onerror",n)},W.onmessage=function(n){"init"==n.data&&W.postMessage(t)}),this.fetchConfig()}catch(n){v(n)}var t,i,r,a},setUserID:function(n){try{d="string"==typeof n?parseInt(n):n,null!=W&&W.postMessage({type:"uid",userID:d})}catch(n){v(n)}},setServerURL:function(n){g=n},setRedirect:function(n){try{var e=this;p&&n?(console.debug=function(){1==arguments.length?e.fine("debug",""+arguments[0]):2<=arguments.length&&e.fine(""+arguments[0],x(arguments))},console.log=function(n,o){1==arguments.length?e.fine("info",""+n):2<=arguments.length&&e.fine(""+n,x(arguments))},console.warn=function(n,o){1==arguments.length?e.fine("warn",""+n):2<=arguments.length&&e.fine(""+n,x(arguments))},console.error=function(n,o){1==arguments.length?e.fine("error",""+n):2<=arguments.length&&e.fine(""+n,x(arguments))}):n||(console.debug=t,console.log=o,console.warn=a,console.error=v)}catch(n){v(n)}},fetchConfig:function(){p&&fetch(g+"/logcat/config/"+u+"/"+d).then(e).then(n).then(function(n){o("applog config:",n),200<=n.code&&n.code<300&&(i=n.enable,r=n.level)}).catch(function(n){console.error(n)})},fine:function(n,o){this._log(0,n,o)},info:function(n,o){this._log(1,n,o)},log:function(n,o){this._log(1,n,o)},warn:function(n,o){this._log(2,n,o)},error:function(n,o){this._log(3,n,o)},_log:function(n,o,e){try{if(n<r)return;var t=""+e;if(100<(""+o).length&&t.substring(0,100),200<t.length&&(t=t.substring(0,200)),!i||!p){switch(n){case 0:console.debug(o,e);break;case 1:console.info(o,e);break;case 2:console.warn(o,e);break;case 3:console.error(o,e);break;default:console.info(o,e)}return}t={type:"message",data:{t:(new Date).getTime(),l:n,g:o,c:e}};null!=W?W.postMessage(t):v("@applog worker do not init yet!")}catch(n){v(n)}}}}(window);window.applog=applog;