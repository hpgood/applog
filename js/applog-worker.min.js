"use strict";var init=!1,head={},dataList=[];const MAX_SIZE=200;var CHECK_TIME=1e4;function parseJSON(t){return t.json()}function checkStatus(t){if(200<=t.status&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}function checkMessage(){postMessage(dataList.length),autoSubmit(),setTimeout("checkMessage()",CHECK_TIME)}function autoSubmit(){var e,t,a;0!=dataList.length&&(init?((e=dataList).length>MAX_SIZE&&(e=dataList.slice(0,MAX_SIZE)),dataList=[],t={appid:head.appid,version:head.version,uid:head.uid,device:head.device,platform:head.platform,key:head.key,data:e},a=head.url+"/logcat/app",fetch(a,{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}).then(checkStatus).then(parseJSON).then(function(t){}).catch(function(t){console.error(t),dataList=dataList.concat(e)})):console.log("@autoSubmit error: applog-worker do not init yet!"))}self.onmessage=function(t){var e=t.data;if("init"===e.type)return head=e,void(init=!0);"uid"!==t.type?dataList.push(e.data):head.userID=e.userID},postMessage("init"),checkMessage();